(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{1449:function(e,t,a){Promise.resolve().then(a.bind(a,4289))},4289:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var n=a(7437),r=a(2265),s=a(6648),c=a(9842),l=a(6231),u=a(5183);function o(){let[e,t]=(0,r.useState)([]),{user:a}=(0,u.Z)();return(0,r.useEffect)(()=>{let e=(0,c.IO)((0,c.hJ)(l.db,"conversations"),(0,c.Xo)("createAt"),(0,c.b9)(50)),a=(0,c.cf)(e,e=>{let a=[];e.forEach(e=>{let t=e.data();a.push({id:t.id,name:t.name,text:t.text,avatar:t.avatar,createAt:t.createAt?t.createAt.toDate():new Date})}),t(a)});return()=>a()},[]),(0,n.jsx)("div",{className:"max-w-[700px] h-screen m-auto",children:(0,n.jsx)("ul",{className:"flex flex-col gap-3 p-10 pb-[150px]",children:e.map((e,t)=>(0,n.jsxs)("li",{className:"relative flex items-center p-3 max-w-xs rounded-lg ".concat(e.id===(null==a?void 0:a.uid)?"self-end rounded-br-none bg-blue-300 text-blue-900":"self-start rounded-bl-none bg-gray-300 text-gray-900"),children:[(0,n.jsx)(s.default,{src:e.avatar,alt:"user icon",width:40,height:40,className:"rounded-full mr-3"}),(0,n.jsxs)("div",{className:"whitespace-normal overflow-hidden",children:[(0,n.jsx)("p",{className:"font-bold",children:e.name}),(0,n.jsx)("p",{children:e.text}),(0,n.jsx)("span",{className:"text-xs text-gray-600",children:e.createAt.toLocaleString()})]})]},t))})})}var i=a(5097);function d(){let[e,t]=(0,r.useState)(""),{user:a}=(0,u.Z)(),s=async n=>{n.preventDefault();try{if(a){let{uid:t,displayName:n,photoURL:r}=a;await (0,c.ET)((0,c.hJ)(l.db,"conversations"),{text:e,id:t,name:n,avatar:r,createAt:(0,c.Bt)()})}}catch(e){console.error(e)}t("")};return(0,n.jsx)("form",{onSubmit:s,className:"bd-blue-200 fixed bottom-0 w-full py-10 flex items-center justify-center px-3 flex-col",children:(0,n.jsxs)("div",{className:"w-full flex items-center justify-center px-3",children:[(0,n.jsx)("input",{value:e,onChange:e=>{t(e.target.value)},placeholder:"Votre message ...",type:"text",className:"p-3 w-full text-gray outline-none border-none rounded-l-md"}),(0,n.jsxs)("button",{type:"submit",className:"bg-green-500 hover:bg-green-600 text-white p-3 flex items-center gap-2 border-none rounded-r-md",children:[(0,n.jsx)(i.yhK,{}),(0,n.jsx)("span",{children:"Envoyer"})]})]})})}var f=a(6463);function x(){let e=(0,f.useRouter)(),{user:t,isFetch:a}=(0,u.Z)(),[s,c]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{a||c(!1)},[a]),(0,r.useEffect)(()=>{s||t||e.push("/")},[t,s,e]),(0,n.jsxs)("div",{className:"w-full h-screen",children:[(0,n.jsx)(o,{}),(0,n.jsx)(d,{})]})}},5183:function(e,t,a){"use strict";var n=a(2265),r=a(6231),s=a(6463),c=a(5735);let l=new c.hJ;t.Z=()=>{let[e,t]=(0,n.useState)(null),[a,u]=(0,n.useState)(!0),o=(0,s.useRouter)(),i=async()=>{(await (0,c.rh)(r.I,l)).user&&o.push("/dashboard")};return(0,n.useEffect)(()=>{let e=(0,c.Aj)(r.I,e=>{e?t(e):t(null),u(!1)});return()=>e()},[]),{user:e,isFetch:a,redirectIfAuthenticated:()=>{e&&o.push("/dashboard")},loginWithGoogle:i}}},6231:function(e,t,a){"use strict";a.d(t,{I:function(){return u},db:function(){return l}});var n=a(5236),r=a(5735),s=a(9842);let c=(0,n.ZF)({apiKey:"AIzaSyDMYfs_EhGMAix4AntTrOOHKHTLPHmpoQU",authDomain:"next-chat-app-c8cf6.firebaseapp.com",projectId:"next-chat-app-c8cf6",storageBucket:"next-chat-app-c8cf6.appspot.com",messagingSenderId:"96656409521",appId:"1:96656409521:web:47dadc81e82135b5857390",measurementId:"G-J1GRDJV7FH"}),l=(0,s.ad)(c),u=(0,r.v0)(c)}},function(e){e.O(0,[358,898,706,207,648,971,23,744],function(){return e(e.s=1449)}),_N_E=e.O()}]);